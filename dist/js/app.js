var CommentApp={URL:"https://jsonplaceholder.typicode.com",EMAIL_REGEX:/^[\w\-\.\+]+\@[a-zA-Z0-9\.\-]+\.[a-zA-z0-9]{2,4}$/,ERROR_TEXT_CL:".error-text",init:function(){CommentApp.getComments(),CommentApp.onSend($(".btn-add")),CommentApp.scrollToTop()},getComments:function(){$.ajax({url:CommentApp.URL+"/comments",method:"GET",success:function(e){console.log(e),CommentApp.drawComments(e)},error:function(){CommentApp.showErrorAlert("Getting comments error!")}})},showErrorAlert:function(e){alert(e),console.log(e)},drawComments:function(e){var o=e.slice(0,20);$.each(o,function(e,o){CommentApp.mustacheRender(o,"#template","#target")})},mustacheRender:function(e,o,n){var t=$(o).html();Mustache.parse(t);var m=Mustache.render(t,e);$(n).append(m)},removeComment:function(e,o){$.ajax({url:CommentApp.URL+"/posts/"+e,type:"DELETE",success:function(){$(o).closest(".comment-detail").remove()},error:function(){CommentApp.showErrorAlert("Removing comment error")}})},onSend:function(e){$(e).on("click",function(){CommentApp.validation(e),CommentApp.getFormData($(".mui-form"))})},resetForm:function(){setTimeout(function(){$(".mui-form")[0].reset()},2e3)},drawAddedComment:function(e,o){console.log(o);var n="",t=CommentApp.getFormData($(".mui-form"));n+='<div class="comment-detail mui-col-md-4 mui-col-xs-6">',n+='<div class="flex-column data-box width100">',n+='<a href="#" class="btn-delete"><i class="fa fa-trash" aria-hidden="true" onclick="CommentApp.removeComment('+o+', event.target)"></a></i>',n+="<span>"+t.name+"</span>",n+='<span class="comment-content"><q>'+t.comment+"</q></span>",n+="<span>"+t.email+"</span>",n+="</div>",n+="</div>",$(".comment-box").prepend(n)},sendAddedComment:function(e){$.ajax({type:"POST",url:CommentApp.URL+"/comments",success:function(o){console.log(o),CommentApp.drawAddedComment(e,o.id)}})},getFormData:function(e){console.log(e),e=e.serializeArray(),console.log(e);var o={};return $.each(e,function(e,n){o[n.name]=n.value}),console.log(e),console.log(o),o},validation:function(e){var o=CommentApp.getFormData($(".mui-form"));return""!=o.name&&""!=o.comment&&""!=o.name.email&&o.email.match(CommentApp.EMAIL_REGEX)?(CommentApp.destroyMessage(),CommentApp.sendAddedComment(e),CommentApp.resetForm(),void 0):(CommentApp.throwError(),!1)},throwError:function(){$(CommentApp.ERROR_TEXT_CL).fadeIn("fast")},destroyMessage:function(){$(CommentApp.ERROR_TEXT_CL).fadeOut("slow")},scrollToTop:function(){$("a[href='#top']").on("click",function(){return $("html, body").animate({scrollTop:0},"slow"),!1})}};$(document).ready(function(){CommentApp.init()});var userApp={URL:"https://jsonplaceholder.typicode.com",init:function(){userApp.getUsers()},getUsers:function(){$.ajax({url:CommentApp.URL+"/users",method:"GET",success:function(e){userApp.drawUsers(e)},error:function(){CommentApp.showErrorAlert("Getting data error!")}})},drawUsers:function(e){$.each(e,function(e,o){CommentApp.mustacheRender(o,"#template-user","#target-user")})},removeUser:function(e,o){$.ajax({url:userApp.URL+"/users/"+e,type:"DELETE",success:function(){$(o).closest(".user-box").remove()},error:function(){CommentApp.showErrorAlert("Removing user error")}})}};$(document).ready(function(){userApp.init()});
//# sourceMappingURL=app.js.map
