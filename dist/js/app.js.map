{"version":3,"sources":["script.js","subpage-script.js"],"names":["CommentApp","URL","EMAIL_REGEX","ERROR_TEXT_CL","init","getComments","onSend","$","scrollToTop","ajax","url","method","success","response","drawComments","error","showErrorAlert","message","alert","comments","sliceComments","slice","each","index","item","mustacheRender","data","id","target","template","html","Mustache","parse","rendered","render","append","removeComment","e","type","closest","remove","btn","on","validation","getFormData","resetForm","setTimeout","reset","drawAddedComment","console","log","block","formData","name","comment","email","prepend","sendAddedComment","form","serializeArray","obj","value","match","destroyMessage","throwError","fadeIn","fadeOut","animate","scrollTop","document","ready","userApp","getUsers","drawUsers","users","removeUser"],"mappings":"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","file":"app.js","sourcesContent":["/**\r\n * Created by Micha≈Ç_2 on 2017-03-07.\r\n */\r\n\r\nvar CommentApp = {\r\n    //variables\r\n    URL: 'https://jsonplaceholder.typicode.com',\r\n    EMAIL_REGEX: /^[\\w\\-\\.\\+]+\\@[a-zA-Z0-9\\.\\-]+\\.[a-zA-z0-9]{2,4}$/,\r\n    ERROR_TEXT_CL: '.error-text',\r\n\r\n\r\n    //init\r\n    init: function () {\r\n        CommentApp.getComments();\r\n        CommentApp.onSend($('.btn-add'));\r\n        CommentApp.scrollToTop();\r\n    },\r\n\r\n\r\n    //function\r\n    getComments: function () {\r\n        $.ajax({\r\n            url: CommentApp.URL + '/comments',\r\n            method: 'GET',\r\n            success: function (response) {\r\n                CommentApp.drawComments(response);\r\n            },\r\n            error: function () {\r\n                CommentApp.showErrorAlert('Getting comments error!');\r\n            }\r\n        });\r\n    },\r\n\r\n    showErrorAlert: function (message) {\r\n        alert(message);\r\n    },\r\n\r\n    drawComments: function (comments) {\r\n        // limit comments length\r\n        var sliceComments = comments.slice(0, 20);\r\n        $.each(sliceComments, function (index, item) {\r\n            CommentApp.mustacheRender(item, '#template', '#target');\r\n        });\r\n    },\r\n\r\n    mustacheRender: function (data, id, target) {\r\n        var template = $(id).html();\r\n        Mustache.parse(template);\r\n        var rendered = Mustache.render(template, data);\r\n        $(target).append(rendered);\r\n    },\r\n\r\n    removeComment: function (id, e) {\r\n        $.ajax({\r\n            url: CommentApp.URL + '/posts/' + id,\r\n            type: 'DELETE',\r\n            success: function () {\r\n                $(e).closest('.comment-detail').remove();\r\n            },\r\n            error: function () {\r\n                CommentApp.showErrorAlert('Removing comment error')\r\n            }\r\n        });\r\n    },\r\n\r\n    onSend: function (btn) {\r\n        $(btn).on('click', function () {\r\n            CommentApp.validation(btn);\r\n            CommentApp.getFormData($('.mui-form'))\r\n        });\r\n    },\r\n\r\n    resetForm: function () {\r\n        setTimeout(function () {\r\n            $('.mui-form')[0].reset();\r\n        }, 2000)\r\n    },\r\n\r\n    drawAddedComment: function (btn, id) {\r\n        console.log(id);\r\n        var block = '';\r\n        var formData = CommentApp.getFormData($('.mui-form'));\r\n        block += '<div class=\"comment-detail mui-col-md-4 mui-col-xs-6\">';\r\n        block += '<div class=\"flex-column data-box width100\">';\r\n        block += '<a href=\"#\" class=\"btn-delete\"><i class=\"fa fa-trash\" aria-hidden=\"true\" onclick=\"CommentApp.removeComment(' + id + ', event.target)\"></a></i>';\r\n        block += '<span>' + formData.name + '</span>';\r\n        block += '<span class=\"comment-content\"><q>' + formData.comment + '</q></span>';\r\n        block += '<span>' + formData.email + '</span>';\r\n        block += '</div>';\r\n        block += '</div>';\r\n        $('.comment-box').prepend(block);\r\n\r\n    },\r\n    sendAddedComment: function (btn) {\r\n        $.ajax({\r\n            type: \"POST\",\r\n            url: CommentApp.URL + '/comments',\r\n            success: function (response) {\r\n                console.log(response);\r\n                CommentApp.drawAddedComment(btn, response.id);\r\n            }\r\n        });\r\n    },\r\n\r\n    getFormData: function (form) {\r\n        form = form.serializeArray();\r\n        var obj = {};\r\n        $.each(form, function (index, item) {\r\n            obj[item.name] = item.value;\r\n        });\r\n        return obj;\r\n    },\r\n\r\n    validation: function (btn) {\r\n        var formData = CommentApp.getFormData($('.mui-form'));\r\n        if (formData.name === '' ||\r\n            formData.comment === '' ||\r\n            formData.name.email === '' || !formData.email.match(CommentApp.EMAIL_REGEX)) {\r\n            CommentApp.throwError();\r\n            return false\r\n        } else {\r\n            CommentApp.destroyMessage();\r\n            CommentApp.sendAddedComment(btn);\r\n            CommentApp.resetForm();\r\n        }\r\n    },\r\n\r\n    throwError: function () {\r\n        $(CommentApp.ERROR_TEXT_CL).fadeIn('fast');\r\n    },\r\n\r\n    destroyMessage: function () {\r\n        $(CommentApp.ERROR_TEXT_CL).fadeOut('slow');\r\n    },\r\n\r\n    scrollToTop: function () {\r\n        $(\"a[href='#top']\").on('click', function () {\r\n            $(\"html, body\").animate({scrollTop: 0}, \"slow\");\r\n            return false;\r\n        });\r\n    }\r\n};\r\n\r\n$(document).ready(function () {\r\n    CommentApp.init();\r\n});","var userApp = {\r\n    //variables\r\n    URL: 'https://jsonplaceholder.typicode.com',\r\n\r\n    //init\r\n    init: function () {\r\n        userApp.getUsers();\r\n    },\r\n\r\n    //function\r\n    getUsers: function () {\r\n        $.ajax({\r\n            url: CommentApp.URL + '/users',\r\n            method: 'GET',\r\n            success: function (response) {\r\n                userApp.drawUsers(response);\r\n            },\r\n            error: function () {\r\n                CommentApp.showErrorAlert('Getting data error!');\r\n            }\r\n        });\r\n    },\r\n\r\n    drawUsers: function (users) {\r\n        $.each(users, function (index, item) {\r\n            CommentApp.mustacheRender(item, '#template-user', '#target-user');\r\n        });\r\n    },\r\n\r\n    removeUser: function (id, btn) {\r\n        $.ajax({\r\n            url: userApp.URL + '/users/' + id,\r\n            type: 'DELETE',\r\n            success: function () {\r\n                $(btn).closest('.user-box').remove();\r\n            },\r\n            error: function () {\r\n                CommentApp.showErrorAlert('Removing user error')\r\n            }\r\n        });\r\n    }\r\n};\r\n\r\n$(document).ready(function () {\r\n    userApp.init();\r\n});"]}